---
phase: 03-heatmap-core
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/ui/components/MuscleHeatmap.tsx
autonomous: true

must_haves:
  truths:
    - 'Body diagram fills available space without floating labels'
    - 'User can visually identify high/low volume muscles at a glance'
    - 'Color alone conveys training distribution'
  artifacts:
    - path: 'src/ui/components/MuscleHeatmap.tsx'
      provides: 'Simplified heatmap without floating cards'
      exports: ['MuscleHeatmap']
  key_links:
    - from: 'MuscleHeatmap'
      to: '@core/color-scale'
      via: 'getVolumeColor for body highlighting'
      pattern: "getVolumeColor\\("
---

<objective>
Simplify MuscleHeatmap to show body diagram without floating labels (HEAT-01)

Purpose: Remove visual clutter so color becomes the primary signal for training distribution.
Output: A clean split-view heatmap where users read volume from color, not from overlapping cards.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-heatmap-core/03-RESEARCH.md
@src/ui/components/MuscleHeatmap.tsx
@src/core/color-scale.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove floating cards and leader lines</name>
  <files>src/ui/components/MuscleHeatmap.tsx</files>
  <action>
Refactor MuscleHeatmap.tsx to remove UI clutter while preserving the core body visualization:

**Remove entirely:**

- `LEADER_LINE_OFFSETS` constant (lines ~112-115)
- `CARD_POSITIONS` constant (lines ~121-154)
- `visibleMuscles` state and related `toggleMuscle`, `toggleAll` functions
- `MuscleCard` component (lines ~467-534)
- SVG leader lines rendering in SplitView (lines ~374-403)
- MuscleCards rendering in SplitView (lines ~430-449)
- Orange divider line between body halves (line ~428)
- "Show All / Hide All" toggle button (lines ~317-324)

**Keep unchanged:**

- `SplitBodyHighlighter` component - this renders the actual colored bodies
- `useScientificMuscleVolume` hook usage
- `REGION_TO_MUSCLES` mapping
- `REGION_TO_LIBRARY_MUSCLES` mapping
- `MUSCLE_ABBREVIATIONS` - may be needed by other components, keep for now
- `getFrequencyLevel` function
- `useIsMobile` hook - may be useful for future responsive adjustments
- Loading/error states

**Simplify SplitView:**

- Remove the `muscleStats`, `visibleMuscles`, `onMuscleClick` props (no longer needed)
- Keep only `regionStats` and `onRegionClick` props
- Remove MuscleCards loop and SVG container for leader lines
- Remove orange divider

**Result:** MuscleHeatmap renders just the two body halves with color-coded regions. No floating elements.
</action>
<verify>
npm run build completes without errors.
npm run lint -- src/ui/components/MuscleHeatmap.tsx passes (may have pre-existing warnings).
Visually inspect: Only body diagram visible, no floating cards or lines.
</verify>
<done>
MuscleHeatmap shows only the split body view with colored muscle regions. No toggle button, no floating cards, no leader lines.
</done>
</task>

<task type="auto">
  <name>Task 2: Optimize layout for screen fill</name>
  <files>src/ui/components/MuscleHeatmap.tsx</files>
  <action>
Adjust container sizing so the body diagram fills available screen space:

**Container adjustments:**

- Increase min-height from 500px/600px to fill more of the viewport
- Consider using `h-[calc(100vh-200px)]` or similar to account for header/nav
- Center the bodies with proper gap between front and back halves
- Ensure bodies scale appropriately with container size

**SplitView layout:**

- Remove the `max-w-4xl` constraint or increase it to allow larger display
- Ensure `justify-center` keeps bodies centered
- The -right-1/2 and -left-1/2 offsets for clipping should still work

**Model sizing:**

- Increase `maxWidth` from `20rem` to larger value (try `24rem` or `100%` with parent constraint)
- Keep the drop-shadow styling for visual polish

**Testing considerations:**

- Desktop: Both body halves visible side-by-side, centered
- Verify no horizontal scroll
- Colors still render correctly
  </action>
  <verify>
  Open dev server at http://localhost:3000
  Navigate to Dashboard with a profile that has workout data.
  Body diagram should be noticeably larger and more prominent.
  No horizontal scrollbar appears.
  npm run build still succeeds.
  </verify>
  <done>
  Body diagram fills available viewport space. Split view is centered and scales appropriately. Color is the dominant visual signal.
  </done>
  </task>

</tasks>

<verification>
1. Build: `npm run build` completes without errors
2. Lint: `npm run lint -- src/ui/components/MuscleHeatmap.tsx`
3. Visual: Body fills screen, no floating cards, colors show correctly
4. Grep check: No references to MuscleCard in rendered output
</verification>

<success_criteria>

- HEAT-01: Body fills screen without floating labels - SATISFIED
- No toggle button visible
- No floating MuscleCards visible
- No leader lines visible
- Colors render correctly using getVolumeColor from @core/color-scale
- Split view shows front (left) and back (right) body halves
  </success_criteria>

<output>
After completion, create `.planning/phases/03-heatmap-core/03-01-SUMMARY.md`
</output>
